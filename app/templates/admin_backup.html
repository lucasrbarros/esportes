{% extends "base.html" %}

{% block extra_css %}
<!-- FullCalendar CSS -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
<style>
    :root {
        --primary-color: #FF6A3D;        /* Laranja principal */
        --primary-hover: #E05A00;        /* Laranja escuro para hover */
        --secondary-color: #1A2238;      /* Azul escuro profundo */
        --secondary-light: #2D3A5C;      /* Azul escuro mais claro */
        --light-gray: #F4F7F9;           /* Cinza muito claro */
        --border-color: #DFE3E8;         /* Cinza claro para bordas */
        --text-color: #333333;           /* Cinza escuro para texto */
        --success-color: #38B000;        /* Verde */
        --warning-color: #FFBD00;        /* Amarelo */
        --danger-color: #F71735;         /* Vermelho */
        --box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        --box-shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.15);
        --transition: all 0.3s ease;
        --border-radius: 8px;
        --border-radius-lg: 12px;
    }

    body {
        background-color: #F8F9FA;
        color: var(--text-color);
    }

    /* Estilo do cabeçalho */
    nav.navbar {
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--secondary-light) 100%) !important;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
        font-weight: 700;
        color: white !important;
    }

    .content-wrapper {
        padding-top: 30px;
        padding-bottom: 40px;
    }

    h2.text-primary {
        color: var(--primary-color) !important;
        font-weight: 700;
        position: relative;
        padding-bottom: 10px;
    }

    h2.text-primary:after {
        content: '';
        position: absolute;
        left: 0;
        bottom: 0;
        height: 4px;
        width: 60px;
        background: var(--primary-color);
        border-radius: 2px;
    }

    /* Estilo dos eventos do calendário */
    .fc-event {
        cursor: pointer;
        border-radius: var(--border-radius);
        padding: 4px 8px;
        margin: 1px 0;
        font-size: 0.9em;
        border: none !important;
        background-color: var(--secondary-color) !important;
        transition: var(--transition);
    }

    .fc-event:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow);
    }

    .fc-event-title {
        font-weight: 600;
    }

    .fc-event-time {
        font-size: 0.85em;
        opacity: 0.9;
    }

    /* Estilo da barra de ferramentas do calendário */
    .fc-toolbar-title {
        font-size: 1.6em !important;
        font-weight: 700 !important;
        color: var(--secondary-color);
    }

    .fc-button {
        background-color: var(--primary-color) !important;
        border-color: var(--primary-color) !important;
        border-radius: 25px !important;
        padding: 8px 16px !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        font-size: 0.9em !important;
        box-shadow: var(--box-shadow) !important;
        transition: var(--transition) !important;
    }

    .fc-button:hover {
        background-color: var(--primary-hover) !important;
        border-color: var(--primary-hover) !important;
        transform: translateY(-2px) !important;
        box-shadow: var(--box-shadow-hover) !important;
    }

    .fc-button-active {
        background-color: var(--primary-hover) !important;
        border-color: var(--primary-hover) !important;
    }

    /* Estilo dos dias no calendário */
    .fc-day-today {
        background-color: rgba(255, 106, 61, 0.1) !important;
    }

    .fc th {
        padding: 10px 0 !important;
        font-weight: 600 !important;
    }

    .fc-col-header-cell-cushion {
        color: var(--secondary-color) !important;
        text-decoration: none !important;
        text-transform: uppercase;
        font-size: 0.85em;
        letter-spacing: 1px;
    }

    .fc-daygrid-day-number {
        color: var(--text-color) !important;
        text-decoration: none !important;
        font-weight: 500;
    }

    /* Estilo dos modais */
    .modal-content {
        border-radius: var(--border-radius-lg);
        box-shadow: var(--box-shadow);
        border: none;
        overflow: hidden;
    }

    .modal-header {
        background-color: var(--secondary-color);
        border-bottom: none;
        padding: 1.5rem;
        border-radius: 0;
    }

    .modal-title {
        font-weight: 700;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .modal-title i {
        color: var(--primary-color);
    }

    .modal-body {
        padding: 1.8rem;
    }

    .modal-footer {
        background-color: var(--light-gray);
        border-top: 1px solid var(--border-color);
        padding: 1.2rem 1.8rem;
    }

    .btn-close {
        color: white;
        background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;
        opacity: 0.8;
    }

    .btn-close:hover {
        opacity: 1;
    }

    /* Estilo dos formulários */
    .form-label {
        font-weight: 600;
        color: var(--secondary-color);
        margin-bottom: 0.5rem;
    }

    .form-control, .form-select {
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
        padding: 0.6rem 1rem;
        font-size: 1rem;
        color: var(--text-color);
        background-color: white;
        transition: var(--transition);
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem rgba(255, 106, 61, 0.25);
    }

    .form-check-input {
        width: 1.2em;
        height: 1.2em;
        margin-top: 0.15em;
    }

    .form-check-input:checked {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }

    .form-check-label {
        margin-left: 0.5rem;
        font-weight: 500;
    }

    /* Estilo dos botões */
    .btn {
        border-radius: 25px;
        font-weight: 600;
        padding: 0.6rem 1.2rem;
        text-transform: uppercase;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
        box-shadow: var(--box-shadow);
        transition: var(--transition);
        border: none;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow-hover);
    }

    .btn-primary {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }

    .btn-primary:hover {
        background-color: var(--primary-hover);
        border-color: var(--primary-hover);
    }

    .btn-secondary {
        background-color: var(--secondary-color);
        border-color: var(--secondary-color);
    }

    .btn-secondary:hover {
        background-color: var(--secondary-light);
        border-color: var(--secondary-light);
    }

    .btn-danger {
        background-color: var(--danger-color);
        border-color: var(--danger-color);
    }

    .btn-danger:hover {
        background-color: #d31525;
        border-color: #d31525;
    }

    .btn-info {
        background-color: var(--secondary-color);
        border-color: var(--secondary-color);
        color: white;
    }

    .btn-info:hover {
        background-color: var(--secondary-light);
        border-color: var(--secondary-light);
        color: white;
    }

    .btn-outline-primary {
        color: var(--primary-color);
        border: 1px solid var(--primary-color);
        background-color: transparent;
    }

    .btn-outline-primary:hover {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        color: white;
    }

    .btn-outline-success {
        color: var(--success-color);
        border: 1px solid var(--success-color);
        background-color: transparent;
    }

    .btn-outline-success:hover {
        background-color: var(--success-color);
        border-color: var(--success-color);
        color: white;
    }

    .table-container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
        margin: 1rem 0;
    }

    .table {
        margin-bottom: 0;
        border-collapse: separate;
        border-spacing: 0;
    }

    .table thead th {
        background-color: var(--light-gray);
        color: var(--text-color);
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        padding: 1rem;
        border-bottom: 2px solid var(--border-color);
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .table tbody tr {
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border-color);
    }

    .table tbody tr:hover {
        background-color: var(--light-gray);
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .table tbody td {
        padding: 1rem;
        vertical-align: middle;
        color: var(--text-color);
        font-size: 0.95rem;
    }

    .badge {
        padding: 0.6em 1em;
        font-weight: 500;
        font-size: 0.85rem;
        border-radius: 6px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .badge.bg-success {
        background-color: var(--success-color) !important;
        color: white;
    }

    .badge.bg-warning {
        background-color: var(--warning-color) !important;
        color: var(--text-color);
    }

    .badge.bg-danger {
        background-color: var(--danger-color) !important;
        color: white;
    }

    .badge.bg-secondary {
        background-color: var(--secondary-color) !important;
        color: white;
    }

    .status-indicator.success {
        background-color: var(--success-color);
    }

    .status-indicator.warning {
        background-color: var(--warning-color);
    }

    .status-indicator.danger {
        background-color: var(--danger-color);
    }

    .status-indicator.secondary {
        background-color: var(--secondary-color);
    }

    .text-primary {
        color: var(--primary-color) !important;
    }

    .avatar-circle {
        width: 32px;
        height: 32px;
        background-color: var(--primary-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .fc-toolbar-title {
        font-size: 1.5em !important;
        font-weight: 600 !important;
    }

    .fc-button {
        background-color: #4a90e2 !important;
        border-color: #4a90e2 !important;
    }

    .fc-button:hover {
        background-color: #357abd !important;
        border-color: #357abd !important;
    }

    .fc-button-active {
        background-color: #357abd !important;
        border-color: #357abd !important;
    }

    .modal-content {
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .modal-header {
        background-color: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        border-radius: 8px 8px 0 0;
    }

    .modal-title {
        font-weight: 600;
        color: #2c3e50;
    }

    .form-label {
        font-weight: 500;
        color: #2c3e50;
    }

    .form-control, .form-select {
        border-radius: 4px;
        border: 1px solid #ced4da;
        padding: 0.5rem 0.75rem;
    }

    .form-control:focus, .form-select:focus {
        border-color: #4a90e2;
        box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
    }

    .btn {
        border-radius: 4px;
        padding: 0.5rem 1rem;
        font-weight: 500;
    }

    .btn-primary {
        background-color: #4a90e2;
        border-color: #4a90e2;
    }

    .btn-primary:hover {
        background-color: #357abd;
        border-color: #357abd;
    }

    .btn-danger {
        background-color: #e74c3c;
        border-color: #e74c3c;
    }

    .btn-danger:hover {
        background-color: #c0392b;
        border-color: #c0392b;
    }

    .btn-info {
        background-color: #3498db;
        border-color: #3498db;
        color: white;
    }

    .btn-info:hover {
        background-color: #2980b9;
        border-color: #2980b9;
        color: white;
    }

    .table {
        border-radius: 8px;
        overflow: hidden;
    }

    .table thead th {
        background-color: #f8f9fa;
        border-bottom: 2px solid #e9ecef;
        color: #2c3e50;
        font-weight: 600;
    }

    .badge {
        padding: 0.5em 0.75em;
        font-weight: 500;
    }

    .badge.bg-success {
        background-color: #2ecc71 !important;
    }

    .badge.bg-warning {
        background-color: #f1c40f !important;
    }

    .badge.bg-danger {
        background-color: #e74c3c !important;
    }

    .badge.bg-secondary {
        background-color: #95a5a6 !important;
    }

    .filters-section {
        background-color: white;
        border-radius: var(--border-radius-lg);
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--box-shadow);
        position: relative;
        overflow: hidden;
    }

    .filters-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 6px;
        height: 100%;
        background-color: var(--primary-color);
        border-radius: var(--border-radius-lg) 0 0 var(--border-radius-lg);
    }

    .calendar-container {
        background-color: white;
        border-radius: var(--border-radius-lg);
        padding: 1.8rem;
        box-shadow: var(--box-shadow);
        margin-bottom: 2rem;
    }

    .table-container {
        background-color: white;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--box-shadow);
        padding: 1.5rem;
        margin: 0;
        overflow: hidden;
    }

    .table {
        margin-bottom: 0;
        border-collapse: separate;
        border-spacing: 0;
    }

    .table thead th {
        background-color: var(--light-gray);
        color: var(--secondary-color);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        padding: 1.2rem 1rem;
        border-bottom: 2px solid var(--border-color);
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .table tbody tr {
        transition: var(--transition);
        border-bottom: 1px solid var(--border-color);
    }

    .table tbody tr:hover {
        background-color: var(--light-gray);
        transform: translateY(-2px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .table tbody td {
        padding: 1.2rem 1rem;
        vertical-align: middle;
        color: var(--text-color);
        font-size: 0.95rem;
    }

    .table tbody tr:last-child td {
        border-bottom: none;
    }

    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding: 0 0.5rem;
    }

    .table-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--secondary-color);
        margin: 0;
        position: relative;
        padding-left: 1rem;
    }

    .table-title::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background-color: var(--primary-color);
        border-radius: 2px;
    }

    .table-actions {
        display: flex;
        gap: 0.8rem;
    }

    .badge {
        padding: 0.6em 1em;
        font-weight: 600;
        font-size: 0.85rem;
        border-radius: 15px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .badge.bg-success {
        background-color: var(--success-color) !important;
        color: white;
    }

    .badge.bg-warning {
        background-color: var(--warning-color) !important;
        color: var(--secondary-color);
    }

    .badge.bg-danger {
        background-color: var(--danger-color) !important;
        color: white;
    }

    .badge.bg-secondary {
        background-color: var(--secondary-color) !important;
        color: white;
    }

    .participant-status {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .status-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
    }

    .status-indicator.success {
        background-color: var(--success-color);
    }

    .status-indicator.warning {
        background-color: var(--warning-color);
    }

    .status-indicator.danger {
        background-color: var(--danger-color);
    }

    .status-indicator.secondary {
        background-color: var(--secondary-color);
    }

    .avatar-circle {
        width: 36px;
        height: 36px;
        background-color: var(--primary-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .action-buttons {
        display: flex;
        gap: 0.5rem;
        justify-content: flex-end;
    }

    .btn-action {
        padding: 0.5rem;
        border-radius: 50%;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        background-color: var(--light-gray);
        border: none;
    }

    .btn-action:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow);
    }

    .btn-action i {
        font-size: 1rem;
        color: var(--secondary-color);
    }

    .btn-action.btn-primary {
        background-color: var(--primary-color);
    }

    .btn-action.btn-primary i {
        color: white;
    }

    .btn-action.btn-info {
        background-color: var(--secondary-color);
    }

    .btn-action.btn-info i {
        color: white;
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--light-gray);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-hover);
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .table tbody tr {
        animation: fadeIn 0.3s ease-out;
    }

    @media (max-width: 768px) {
        .table-header {
            flex-direction: column;
            gap: 1rem;
            align-items: flex-start;
        }

        .table-actions {
            width: 100%;
            justify-content: flex-end;
        }

        .table thead th {
            white-space: nowrap;
        }
        
        .fc-header-toolbar {
            flex-direction: column;
            gap: 1rem;
        }
    }

    /* Resumo Financeiro */
    .info-card {
        transition: var(--transition);
        border: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .info-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--box-shadow);
    }
    
    .info-card h4 {
        font-size: 1.5rem;
        font-weight: 700;
    }
    
    /* Tabela de participantes */
    .table-container {
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        overflow: hidden;
    }
    
    #tabelaParticipantes {
        margin-bottom: 0;
    }
    
    #tabelaParticipantes thead th {
        background-color: var(--secondary-color);
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        padding: 0.85rem 0.75rem;
        vertical-align: middle;
    }
    
    #tabelaParticipantes tbody td {
        vertical-align: middle;
        padding: 0.75rem;
        font-size: 0.95rem;
    }
    
    #tabelaParticipantes tbody tr:hover {
        background-color: rgba(0, 0, 0, 0.02);
    }
    
    #tabelaParticipantes tfoot td {
        background-color: var(--light-gray);
        font-weight: 600;
        padding: 0.75rem;
    }
    
    /* Badges e Status */
    .badge {
        font-weight: 600;
        padding: 0.4em 0.6em;
        border-radius: 4px;
    }
    
    /* Filtros e controles de participantes */
    .filters-section {
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        padding: 1.2rem;
        margin-bottom: 1.5rem;
    }
    
    /* Modal de pagamento em lote */
    .alert-info {
        background-color: rgba(13, 202, 240, 0.1);
        border-color: rgba(13, 202, 240, 0.2);
        color: #055160;
    }
    
    /* Estilo para campos de texto modificados */
    .form-control:focus, .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.25rem rgba(255, 106, 61, 0.25);
    }
    
    /* Estilo para checkbox */
    .form-check-input:checked {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }
    
    .form-check-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.25rem rgba(255, 106, 61, 0.25);
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex align-items-center">
                <h2 class="text-primary mb-0">Gerenciamento de Jogos</h2>
                <div class="ms-auto">
                    <button class="btn btn-success me-2" id="btnGerenciarQuadras">
                        <i class="fas fa-table-tennis me-2"></i>Gerenciar Quadras
                    </button>
                    <button class="btn btn-primary" id="btnNovoJogo">
                        <i class="fas fa-plus-circle me-2"></i>Novo Jogo
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Filtros -->
    <div class="filters-section">
        <div class="row g-3 align-items-end">
            <div class="col-md-3">
                <label class="form-label small mb-1">Esporte</label>
                <select class="form-select form-select-sm" id="sportFilter">
                    <option value="">Todos os Esportes</option>
                    <option value="Futebol">Futebol</option>
                    <option value="Vôlei">Vôlei</option>
                    <option value="Basquete">Basquete</option>
                    <option value="Tênis">Tênis</option>
                    <option value="Outros">Outros</option>
                </select>
            </div>
            <div class="col-md-3">
                <label class="form-label small mb-1">Data</label>
                <input type="date" class="form-control form-control-sm" id="dateFilter">
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary btn-sm w-100" id="btnFiltrar">
                    <i class="fas fa-search me-1"></i>Filtrar
                </button>
            </div>
            <div class="col-md-2">
                <button class="btn btn-secondary btn-sm w-100" id="btnLimpar">
                    <i class="fas fa-times me-1"></i>Limpar
                </button>
            </div>
            <div class="col-md-2">
                <button class="btn btn-info btn-sm w-100" id="btnRelatorios" data-bs-toggle="modal" data-bs-target="#relatoriosModal">
                    <i class="fas fa-chart-bar me-1"></i>Relatórios
                </button>
            </div>
        </div>
    </div>

    <!-- Calendário -->
    <div class="calendar-container">
        <div id="calendar"></div>
    </div>

    <!-- Modal para Adicionar/Editar Quadra -->
    <div class="modal fade" id="roomModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-futbol me-2"></i>Gerenciar Jogo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="roomForm">
                        <input type="hidden" id="roomId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nome do Jogo</label>
                                <input type="text" class="form-control" id="name" required placeholder="Ex: Futebol no Parque">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Esporte</label>
                                <select class="form-select" id="sport" required>
                                    <option value="Futebol">Futebol</option>
                                    <option value="Vôlei">Vôlei</option>
                                    <option value="Basquete">Basquete</option>
                                    <option value="Tênis">Tênis</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Data e Hora</label>
                                <input type="datetime-local" class="form-control" id="date" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Máximo de Participantes</label>
                                <input type="number" class="form-control" id="maxParticipants" required min="1">
                            </div>
                            
                            <div class="col-12">
                                <hr>
                                <h6 class="mb-3"><i class="fas fa-table-tennis me-2"></i>Dados da Quadra</h6>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Selecionar Quadra</label>
                                <select class="form-select" id="courtId">
                                    <option value="">Sem quadra específica</option>
                                    <!-- Opções serão carregadas via JavaScript -->
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Duração (horas)</label>
                                <input type="number" class="form-control" id="durationHours" step="0.5" min="0.5" value="1">
                            </div>
                            
                            <div class="col-md-6 mb-3" id="courtInfoContainer" style="display: none;">
                                <div class="card bg-light h-100">
                                    <div class="card-body p-3">
                                        <h6 class="card-title mb-2" id="courtInfoName">-</h6>
                                        <div class="mb-1 small"><i class="fas fa-users me-1"></i> <span id="courtInfoCapacity">-</span> pessoas</div>
                                        <div class="mb-1 small"><i class="fas fa-money-bill-wave me-1"></i> <span id="courtInfoPrice">-</span>/hora</div>
                                        <div class="mt-2 fw-bold">Total: R$ <span id="courtInfoTotal">0.00</span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Valor por Participante (R$)</label>
                                <div class="input-group">
                                    <span class="input-group-text">R$</span>
                                    <input type="number" class="form-control" id="valor" min="0" step="0.01" readonly>
                                </div>
                                <small class="form-text text-muted mt-2" id="valorCalculadoInfo">
                                    Valor calculado automaticamente com base no preço da quadra e número de participantes.
                                </small>
                            </div>
                            
                            <div class="col-12">
                                <hr>
                                <h6 class="mb-3"><i class="fas fa-info-circle me-2"></i>Informações Adicionais</h6>
                            </div>
                            
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Descrição</label>
                                <textarea class="form-control" id="description" rows="3" placeholder="Detalhes adicionais sobre o jogo, regras, etc."></textarea>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="isPrivate">
                                    <label class="form-check-label">Jogo Privado</label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="isActive" checked>
                                    <label class="form-check-label">Jogo Ativo</label>
                                </div>
                            </div>
                            <!-- Campos ocultos para compatibilidade -->
                            <input type="hidden" id="city" value="Não informada">
                            <input type="hidden" id="location" value="">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-danger" id="btnExcluir">
                        <i class="fas fa-trash me-2"></i>Excluir
                    </button>
                    <button type="button" class="btn btn-primary" id="btnSalvar">
                        <i class="fas fa-save me-2"></i>Salvar
                    </button>
                    <button type="button" class="btn btn-info" id="btnGerenciarParticipantes">
                        <i class="fas fa-users me-2"></i>Participantes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Gerenciar Quadras -->
    <div class="modal fade" id="courtsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-table-tennis me-2"></i>Gerenciamento de Quadras</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <button class="btn btn-success" id="btnNovaCourt">
                            <i class="fas fa-plus-circle me-2"></i>Nova Quadra
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="tabelaQuadras">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Esporte</th>
                                        <th>Localização</th>
                                        <th>Preço/Hora</th>
                                        <th>Capacidade</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="courtsList">
                                    <!-- Será preenchido via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal para Adicionar/Editar Quadra -->
    <div class="modal fade" id="courtModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-table-tennis me-2"></i>Adicionar Quadra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="courtForm">
                        <input type="hidden" id="courtIdField">
                        <div class="mb-3">
                            <label class="form-label">Nome da Quadra</label>
                            <input type="text" class="form-control" id="courtName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tipo de Esporte</label>
                            <select class="form-select" id="courtSportType" required>
                                <option value="Futebol">Futebol</option>
                                <option value="Vôlei">Vôlei</option>
                                <option value="Basquete">Basquete</option>
                                <option value="Tênis">Tênis</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Preço por Hora (R$)</label>
                            <input type="number" class="form-control" id="courtPrice" step="0.01" min="0" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Capacidade Máxima</label>
                            <input type="number" class="form-control" id="courtCapacity" min="1" value="10" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Localização</label>
                            <input type="text" class="form-control" id="courtLocation">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descrição</label>
                            <textarea class="form-control" id="courtDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="courtIsActive" checked>
                            <label class="form-check-label">Quadra Ativa</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-danger" id="btnExcluirQuadra">
                        <i class="fas fa-trash me-2"></i>Excluir
                    </button>
                    <button type="button" class="btn btn-primary" id="btnSalvarQuadra">
                        <i class="fas fa-save me-2"></i>Salvar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Gerenciar Participantes -->
    <div class="modal fade participants-modal" id="participantsModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-users me-2"></i>
                        Gerenciar Participantes
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Resumo do jogo -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="d-flex align-items-center mb-2">
                                        <i class="fas fa-futbol text-primary me-2" style="font-size: 1.5rem;"></i>
                                        <h5 class="mb-0" id="jogoTitulo">Carregando...</h5>
                                    </div>
                                    <p class="text-muted mb-1" id="jogoData">Data: carregando...</p>
                                    <p class="text-muted mb-0" id="jogoLocal">Local: carregando...</p>
                                </div>
                                <div class="col-md-5">
                                    <div class="d-flex align-items-center justify-content-around mb-2">
                                        <div class="text-center">
                                            <h5 class="mb-1" id="jogoOcupacao">0/0</h5>
                                            <p class="text-muted small">Ocupação</p>
                                        </div>
                                        <div class="text-center">
                                            <h5 class="mb-1" id="jogoValor">R$ 0,00</h5>
                                            <p class="text-muted small">Valor por pessoa</p>
                                        </div>
                                        <div class="text-center">
                                            <h5 class="mb-1 text-success" id="jogoTotalArrecadado">R$ 0,00</h5>
                                            <p class="text-muted small">Total arrecadado</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar bg-success" id="jogoPagosBar" style="width: 0%" role="progressbar">0%</div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small class="text-success"><i class="fas fa-check-circle"></i> <span id="jogoPagos">0</span> pagos</small>
                                        <small class="text-warning"><i class="fas fa-clock"></i> <span id="jogoPendentes">0</span> pendentes</small>
                                        <small class="text-danger"><i class="fas fa-times-circle"></i> <span id="jogoCancelados">0</span> cancelados</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resumo financeiro do jogo -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex align-items-center">
                            <h6 class="mb-0 text-success">
                                <i class="fas fa-money-bill-wave me-2"></i>Resumo Financeiro
                            </h6>
                            <button class="btn btn-sm btn-outline-success ms-auto" id="btnExportarFinanceiro">
                                <i class="fas fa-file-export me-1"></i>Exportar
                                </button>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="info-card bg-success bg-opacity-10 p-3 rounded h-100">
                                        <h4 class="text-success mb-0" id="jogoValorTotal">R$ 0,00</h4>
                                        <p class="mb-0 small">Valor total previsto</p>
                                        <small class="text-muted">Previsão com ocupação máxima</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-card bg-primary bg-opacity-10 p-3 rounded h-100">
                                        <h4 class="text-primary mb-0" id="jogoValorConfirmado">R$ 0,00</h4>
                                        <p class="mb-0 small">Valor confirmado</p>
                                        <small class="text-muted">Valores com status "Pago"</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-card bg-warning bg-opacity-10 p-3 rounded h-100">
                                        <h4 class="text-warning mb-0" id="jogoValorPendente">R$ 0,00</h4>
                                        <p class="mb-0 small">Pagamentos pendentes</p>
                                        <small class="text-muted">Valores a receber</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-card bg-info bg-opacity-10 p-3 rounded h-100">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h4 class="text-info mb-0" id="jogoPercentualPago">0%</h4>
                                                <p class="mb-0 small">Pagamentos realizados</p>
                                            </div>
                                            <div class="rounded-circle p-2 bg-info bg-opacity-20 text-info">
                                                <i class="fas fa-percentage"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controles de ação em massa -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="d-flex flex-wrap gap-2">
                                <div class="btn-group me-3">
                                    <button class="btn btn-sm btn-outline-primary" id="btnSelecionarTodos">
                                        <i class="fas fa-check-square me-1"></i>Selecionar Todos
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary" id="btnSelecionarPendentes">
                                        <i class="fas fa-clock me-1"></i>Selecionar Pendentes
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" id="btnLimparSelecao">
                                        <i class="fas fa-square me-1"></i>Limpar Seleção
                                </button>
                            </div>
                                
                                <div class="btn-group me-3">
                                    <button class="btn btn-sm btn-success" id="btnMarcarPago" disabled>
                                        <i class="fas fa-check me-1"></i>Marcar como PAGO
                                    </button>
                                    <button class="btn btn-sm btn-warning" id="btnMarcarPendente" disabled>
                                        <i class="fas fa-clock me-1"></i>Marcar como Pendente
                                    </button>
                        </div>
                                
                                <button class="btn btn-sm btn-primary" id="btnRegistrarPagamento" disabled>
                                    <i class="fas fa-money-bill-wave me-1"></i>Registrar Pagamento
                                </button>
                                
                                <button class="btn btn-sm btn-info" id="btnEnviarLembretes" disabled>
                                    <i class="fas fa-bell me-1"></i>Enviar Lembretes
                                </button>
                                
                                <div class="ms-auto">
                                    <div class="input-group">
                                        <select class="form-select form-select-sm me-2" id="filtroStatusPagamento" style="max-width: 150px;">
                                            <option value="">Todos os status</option>
                                            <option value="pendente">Pendentes</option>
                                            <option value="pago">Pagos</option>
                                            <option value="cancelado">Cancelados</option>
                                        </select>
                                        <input type="text" class="form-control form-control-sm" placeholder="Buscar participante..." id="buscarParticipante">
                                        <button class="btn btn-sm btn-outline-secondary" type="button" id="btnBuscar">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="tabelaParticipantes">
                                <thead>
                                    <tr>
                                        <th style="width: 40px;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="checkTodos">
                                            </div>
                                        </th>
                                        <th>Nome</th>
                                        <th>Email</th>
                                        <th>Status</th>
                                        <th>Pagamento</th>
                                        <th>Valor</th>
                                        <th>Método</th>
                                        <th>Data Pagamento</th>
                                        <th>Check-in</th>
                                        <th style="width: 120px;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="participantsList">
                                    <!-- Será preenchido via JavaScript -->
                                </tbody>
                                <tfoot>
                                    <tr class="table-light">
                                        <td colspan="5" class="text-end fw-bold">Totais:</td>
                                        <td class="fw-bold" id="totalValorTabela">R$ 0,00</td>
                                        <td colspan="4"></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success me-auto" id="btnExportarParticipantes">
                        <i class="fas fa-file-excel me-2"></i>Exportar Lista
                    </button>
                    <button type="button" class="btn btn-primary" id="btnAdicionarParticipante">
                        <i class="fas fa-user-plus me-2"></i>Adicionar Participante
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Editar Participante -->
    <div class="modal fade" id="participantModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-user-edit me-2"></i>Editar Participante</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="participantForm">
                        <input type="hidden" id="participantId">
                        <input type="hidden" id="participantRoomId">
                        
                        <div class="row mb-3">
                            <div class="col-md-7">
                            <label class="form-label">Nome</label>
                            <input type="text" class="form-control" id="participantName" readonly>
                        </div>
                            <div class="col-md-5">
                                <label class="form-label">Valor a Pagar</label>
                                <div class="input-group">
                                    <span class="input-group-text">R$</span>
                                    <input type="number" class="form-control" id="participantValor" step="0.01" min="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="participantEmail" readonly>
                        </div>
                        
                        <div class="card bg-light mb-3">
                            <div class="card-header">
                                <h6 class="mb-0">Informações de Pagamento</h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Status</label>
                            <select class="form-select" id="pagamentoStatus">
                                <option value="pendente">Pendente</option>
                                <option value="pago">Pago</option>
                                <option value="cancelado">Cancelado</option>
                            </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Método</label>
                                        <select class="form-select" id="pagamentoMetodo">
                                            <option value="">Selecione...</option>
                                            <option value="pix">PIX</option>
                                            <option value="dinheiro">Dinheiro</option>
                                            <option value="cartao">Cartão</option>
                                            <option value="transferencia">Transferência</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                        </div>
                        <div class="mb-3">
                                    <label class="form-label">Data de Pagamento</label>
                                    <input type="datetime-local" class="form-control" id="pagamentoData">
                        </div>
                                <div class="mb-3">
                                    <label class="form-label">Comprovante (ID/Código)</label>
                                    <input type="text" class="form-control" id="pagamentoComprovante" placeholder="Código de transação ou identificação">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="participantCheckedIn">
                                <label class="form-check-label">Check-in Realizado</label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Observações</label>
                            <textarea class="form-control" id="participantObservacoes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-danger" id="btnRemoverParticipant">
                        <i class="fas fa-user-minus me-2"></i>Remover
                    </button>
                    <button type="button" class="btn btn-primary" id="btnSalvarParticipant">
                        <i class="fas fa-save me-2"></i>Salvar
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal para Registro de Pagamento em Lote -->
    <div class="modal fade" id="pagamentoLoteModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-money-bill-wave me-2"></i>Registrar Pagamentos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-info-circle me-2 fs-4"></i>
                            <div>
                                <p class="mb-0">Registrar pagamento para <strong id="qtdPagamentoLote">0</strong> participantes selecionados.</p>
                                <p class="mb-0 fw-bold">Valor total: <span id="valorTotalLote">R$ 0,00</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <form id="pagamentoLoteForm">
                        <div class="mb-3">
                            <label class="form-label">Status de Pagamento</label>
                            <select class="form-select" id="lotePagamentoStatus">
                                <option value="pago">Pago</option>
                                <option value="pendente">Pendente</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Método de Pagamento</label>
                            <select class="form-select" id="lotePagamentoMetodo">
                                <option value="">Selecione...</option>
                                <option value="pix">PIX</option>
                                <option value="dinheiro">Dinheiro</option>
                                <option value="cartao">Cartão</option>
                                <option value="transferencia">Transferência</option>
                                <option value="outro">Outro</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Data de Pagamento</label>
                            <input type="datetime-local" class="form-control" id="lotePagamentoData">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Comprovante/ID (opcional)</label>
                            <input type="text" class="form-control" id="loteComprovante" placeholder="Referência ou identificação do pagamento">
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="loteCheckIn">
                                <label class="form-check-label">Marcar check-in como realizado</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Observações</label>
                            <textarea class="form-control" id="loteObservacoes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-success" id="btnSalvarPagamentoLote">
                        <i class="fas fa-check me-2"></i>Confirmar Pagamentos
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Relatórios -->
    <div class="modal fade" id="relatoriosModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-chart-line me-2"></i>Relatórios e Estatísticas</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs mb-4" id="relatoriosTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="resumo-tab" data-bs-toggle="tab" data-bs-target="#resumo" type="button" role="tab" aria-controls="resumo" aria-selected="true">Resumo</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="esportes-tab" data-bs-toggle="tab" data-bs-target="#esportes" type="button" role="tab" aria-controls="esportes" aria-selected="false">Esportes</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="jogadores-tab" data-bs-toggle="tab" data-bs-target="#jogadores" type="button" role="tab" aria-controls="jogadores" aria-selected="false">Jogadores</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="financeiro-tab" data-bs-toggle="tab" data-bs-target="#financeiro" type="button" role="tab" aria-controls="financeiro" aria-selected="false">Financeiro</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="relatoriosTabsContent">
                        <!-- Resumo Geral -->
                        <div class="tab-pane fade show active" id="resumo" role="tabpanel" aria-labelledby="resumo-tab">
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card bg-primary text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="totalJogos">0</h3>
                                            <p class="mb-0">Jogos Realizados</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-success text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="totalParticipantes">0</h3>
                                            <p class="mb-0">Participantes</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-warning text-dark">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="mediaJogadores">0</h3>
                                            <p class="mb-0">Média de Jogadores</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-info text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="totalEsportes">0</h3>
                                            <p class="mb-0">Esportes Diferentes</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Próximos Jogos</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-sm table-hover" id="tabelaProximosJogos">
                                                    <thead>
                                                        <tr>
                                                            <th>Data</th>
                                                            <th>Jogo</th>
                                                            <th>Ocupação</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- Será preenchido via JavaScript -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Jogos por Mês</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoJogosPorMes" width="400" height="200"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estatísticas de Esportes -->
                        <div class="tab-pane fade" id="esportes" role="tabpanel" aria-labelledby="esportes-tab">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Distribuição de Esportes</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoDistribuicaoEsportes" width="400" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Participantes por Esporte</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoParticipantesPorEsporte" width="400" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">Detalhes por Esporte</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="tabelaDetalhesPorEsporte">
                                            <thead>
                                                <tr>
                                                    <th>Esporte</th>
                                                    <th>Total de Jogos</th>
                                                    <th>Total de Participantes</th>
                                                    <th>Média de Participantes</th>
                                                    <th>Valor Médio</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Será preenchido via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estatísticas de Jogadores -->
                        <div class="tab-pane fade" id="jogadores" role="tabpanel" aria-labelledby="jogadores-tab">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Jogadores Mais Frequentes</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoJogadoresFrequentes" width="400" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Taxa de Check-in</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoTaxaCheckin" width="400" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">Ranking de Jogadores</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="tabelaRankingJogadores">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Jogador</th>
                                                    <th>Jogos Participados</th>
                                                    <th>Taxa de Check-in</th>
                                                    <th>Esporte Favorito</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Será preenchido via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estatísticas Financeiras -->
                        <div class="tab-pane fade" id="financeiro" role="tabpanel" aria-labelledby="financeiro-tab">
                            <div class="row mb-4">
                                <div class="col-md-4">
                                    <div class="card bg-success text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="valorTotalArrecadado">R$ 0</h3>
                                            <p class="mb-0">Total Arrecadado</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-primary text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="valorTotalPendente">R$ 0</h3>
                                            <p class="mb-0">Pendente de Pagamento</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-info text-white">
                                        <div class="card-body text-center">
                                            <h3 class="display-4 fw-bold" id="valorMedioPorJogo">R$ 0</h3>
                                            <p class="mb-0">Valor Médio por Jogo</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Arrecadação Mensal</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoArrecadacaoMensal" width="400" height="250"></canvas>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h5 class="card-title mb-0">Status de Pagamentos</h5>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="graficoStatusPagamentos" width="400" height="250"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">Últimos Pagamentos</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="tabelaUltimosPagamentos">
                                            <thead>
                                                <tr>
                                                    <th>Data</th>
                                                    <th>Jogador</th>
                                                    <th>Jogo</th>
                                                    <th>Valor</th>
                                                    <th>Método</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Será preenchido via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="btnExportarRelatorio">
                        <i class="fas fa-file-excel me-2"></i>Exportar Relatório
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- FullCalendar JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales-all.min.js'></script>
<!-- Chart.js para gráficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

<script>
// CÓDIGO DE CORREÇÃO DE ERROS - Adicionado no início do script
console.log("Inicializando verificação de segurança e correção de erros");

// Substituir funções duplicadas com segurança
window.addEventListener('DOMContentLoaded', function() {
    console.log("Executando rotina de segurança para prevenir duplicação de event listeners");
    
    // Função segura para adicionar event listeners
    function addSafeEventListener(elementId, event, callback) {
        const element = document.getElementById(elementId);
        if (!element) {
            console.error(`Elemento #${elementId} não encontrado!`);
            return;
        }
        
        // Remover todos os event listeners existentes (se possível) - apenas como precaução
        if (element.cloneNode) {
            const clone = element.cloneNode(true);
            if (element.parentNode) {
                element.parentNode.replaceChild(clone, element);
                console.log(`Event listeners limpos do elemento #${elementId}`);
            }
        }
        
        // Adicionar o novo listener
        document.getElementById(elementId).addEventListener(event, callback);
        console.log(`Event listener '${event}' adicionado com segurança ao elemento #${elementId}`);
    }
    
    // Definir funções globais com segurança (apenas uma vez)
    // Estas serão usadas pelo atributo onclick dos botões
    if (typeof window.editarParticipante !== 'function') {
        window.editarParticipante = function(participantId, roomId) {
            console.log(`Acionando função segura editarParticipante(${participantId}, ${roomId})`);
            // A implementação real será definida depois
            try {
                const modal = new bootstrap.Modal(document.getElementById('participantModal'));
                modal.show();
            } catch (error) {
                console.error("Erro ao abrir modal de participante:", error);
                alert("Erro ao editar participante. Verifique o console para detalhes.");
            }
        };
        console.log("Função global editarParticipante definida com segurança");
    }
    
    if (typeof window.removerParticipante !== 'function') {
        window.removerParticipante = function(participantId, roomId) {
            console.log(`Acionando função segura removerParticipante(${participantId}, ${roomId})`);
            // A implementação real será definida depois
            if (confirm('Tem certeza que deseja remover este participante?')) {
                alert("Função de remoção de participante em manutenção");
            }
        };
        console.log("Função global removerParticipante definida com segurança");
    }
    
    if (typeof window.editarQuadra !== 'function') {
        window.editarQuadra = function(courtId) {
            console.log(`Acionando função segura editarQuadra(${courtId})`);
            // A implementação real será definida depois
            try {
                const modal = new bootstrap.Modal(document.getElementById('courtModal'));
                modal.show();
            } catch (error) {
                console.error("Erro ao abrir modal de quadra:", error);
                alert("Erro ao editar quadra. Verifique o console para detalhes.");
            }
        };
        console.log("Função global editarQuadra definida com segurança");
    }
    
    if (typeof window.excluirQuadra !== 'function') {
        window.excluirQuadra = function(courtId) {
            console.log(`Acionando função segura excluirQuadra(${courtId})`);
            // A implementação real será definida depois
            if (confirm('Tem certeza que deseja excluir esta quadra?')) {
                alert("Função de exclusão de quadra em manutenção");
            }
        };
        console.log("Função global excluirQuadra definida com segurança");
    }
    
    if (typeof window.verDetalhes !== 'function') {
        window.verDetalhes = function(id) {
            alert('Funcionalidade em desenvolvimento');
        };
        console.log("Função global verDetalhes definida com segurança");
    }
    
    // Adicionar event listeners com segurança aos botões principais após um curto delay
    setTimeout(function() {
        console.log("Adicionando event listeners com segurança aos botões principais");
        
        addSafeEventListener('btnNovoJogo', 'click', function() {
            console.log("Botão Novo Jogo clicado com segurança");
            try {
                const modal = new bootstrap.Modal(document.getElementById('roomModal'));
                modal.show();
            } catch (error) {
                console.error("Erro ao abrir modal:", error);
                alert("Erro ao abrir o modal. Atualize a página e tente novamente.");
            }
        });
        
        addSafeEventListener('btnGerenciarQuadras', 'click', function() {
            console.log("Botão Gerenciar Quadras clicado com segurança");
            try {
                const modal = new bootstrap.Modal(document.getElementById('courtsModal'));
                modal.show();
            } catch (error) {
                console.error("Erro ao abrir modal:", error);
                alert("Erro ao abrir o modal. Atualize a página e tente novamente.");
            }
        });
        
        console.log("Configuração de segurança concluída");
    }, 500);
});

// DEBUG HELPER - Descomente para depurar
console.log("Iniciando script admin.html");
</script>
{% endblock %} 